/*! Lines: v1.0.3 (webpack: v1.12.2) */
!function(t){function e(s){if(n[s])return n[s].exports;var l=n[s]={exports:{},id:s,loaded:!1};return t[s].call(l.exports,l,l.exports,e),l.loaded=!0,l.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var s=n(4),l=n(2);s.data.windowId=stbWebWindow.windowId(),s.data.isPortal=1===s.data.windowId,window.parent.postMessage("show","*"),s.addListeners({load:function(){s.params=n(14)(location.search.substring(1)),l.init([n(8)]),l.init([n(9)])},done:function(){l.navigate("pageMain")}})},function(t,e,n){"use strict";function s(){this.events={}}s.prototype={addListener:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},once:function(t,e){var n=this;this.events[t]=this.events[t]||[],this.events[t].push(function s(l){e(l),n.removeListener(t,s)})},addListeners:function(t){var e;if("object"==typeof t)for(e in t)t.hasOwnProperty(e)&&this.addListener(e,t[e])},removeListener:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}),0===this.events[t].length&&(this.events[t]=void 0))},removeAllListeners:function(t){0===arguments.length?this.events={}:t&&(this.events[t]=void 0)},emit:function(t,e){var n,s=this.events[t];if(s)for(n=0;n<s.length;n++)s[n].call(this,e)}},s.prototype.constructor=s,t.exports=s},function(t,e,n){"use strict";var s,l=n(1);s=new l,s.current=null,s.history=[],s.pages=[],s.ids={},s.init=function(t){var e,n,s;if(t){for(this.pages=[],this.pages=t,e=0,n=t.length;n>e;e++)s=t[e],this.ids[s.id]=s,s.active&&(this.current=s);return this.events.init&&this.emit("init",{pages:t}),!0}return!1},s.parse=function(t){var e={name:"",data:[]};return e.data=t.split("/").map(decodeURIComponent),e.name=e.data.shift().slice(1),e},s.stringify=function(t,e){return e=Array.isArray(e)?e:[],t=encodeURIComponent(t),e=e.map(encodeURIComponent),e.unshift(t),e.join("/")},s.show=function(t,e){return t&&!t.active?(t.$node.classList.add("active"),t.active=!0,this.current=t,t.events.show&&t.emit("show",{page:t,data:e}),!0):!1},s.hide=function(t){return t&&t.active?(t.$node.classList.remove("active"),t.active=!1,this.current=null,t.events.hide&&t.emit("hide",{page:t}),!0):!1},s.navigate=function(t,e){var n=this.current,s=this.ids[t];return s&&!s.active?(location.hash=this.stringify(t,e),this.hide(this.current),this.show(s,e),this.events.navigate&&this.emit("navigate",{from:n,to:s}),this.history.push(s),!0):!1},s.back=function(){var t,e;return this.history.length>1&&(t=this.history.pop(),e=this.history[this.history.length-1],e&&!e.active)?(location.hash=e.id,this.hide(this.current),this.show(e),this.events.navigate&&this.emit("navigate",{from:t,to:e}),!0):!1},t.exports=s},function(t,e){"use strict";t.exports={keysBlock:!1,gs:{account:0,layers:{bg:null,context:null,pointer:null},size:{480:{scr:{w:360,h:360},cll:{w:40,h:40}},576:{scr:{w:450,h:450},cll:{w:50,h:50}},720:{scr:{w:495,h:495},cll:{w:55,h:55}},1080:{scr:{w:765,h:765},cll:{w:85,h:85}}},cells:{x:9,y:9},position:{old:{x:0,y:0},current:{x:0,y:0}},move:{selected:!1,readyToCheck:!1,start:{x:-1,y:-1},finish:{x:-1,y:-1}},coeff:1,balls:null,colors:["red","blue","green","orange","violet","black","white"],nextBalls:[]}}},function(t,e,n){"use strict";var s,l,i=n(11),r=n(2),o=n(5),a={};n(12),window.parent&&window.parent.gSTB&&(window.dvbManager=window.parent.dvbManager,window.epgManager=window.parent.epgManager,window.gSTB=window.parent.gSTB,window.pvrManager=window.parent.pvrManager,window.stbDownloadManager=window.parent.stbDownloadManager,window.stbStorage=window.parent.stbStorage,window.stbUpdate=window.parent.stbUpdate,window.stbUPnP=window.parent.stbUPnP,window.stbWebWindow=window.parent.stbWebWindow,window.stbWindowMgr=window.parent.stbWindowMgr,window.timeShift=window.parent.timeShift),s=new i({debug:!1,host:!0,frame:window!==window.parent,screen:null,time:{init:+new Date,load:0,done:0}}),s.setScreen=function(t){var e;return t?(t.availHeight=t.height-(t.availTop+t.availBottom),t.availWidth=t.width-(t.availLeft+t.availRight),window.moveTo(0,0),window.resizeTo(t.width,t.height),e=document.querySelector("link[rel=stylesheet]"),e&&e instanceof HTMLLinkElement&&document.head.removeChild(e),e=document.createElement("link"),e.rel="stylesheet",e.href="css/release."+t.height+".css?"+ +new Date,document.head.appendChild(e),this.data.metrics=t,!0):!1},s.EVENT_END_OF_FILE=1,s.EVENT_GET_MEDIA_INFO=2,s.EVENT_PLAYBACK_BEGIN=4,s.EVENT_CONTENT_ERROR=5,s.EVENT_DUAL_MONO_DETECT=6,s.EVENT_INFO_GET=7,s.EVENT_SUBTITLE_LOAD_ERROR=8,s.EVENT_SUBTITLE_FIND=9,s.EVENT_HDMI_CONNECT=32,s.EVENT_HDMI_DISCONNECT=33,s.EVENT_RECORD_FINISH_SUCCESSFULL=34,s.EVENT_RECORD_FINISH_ERROR=35,s.EVENT_DVB_SCANING=40,s.EVENT_DVB_FOUND=41,s.EVENT_DVB_CHANELL_EPG_UPDATE=42,s.EVENT_DVB_ANTENNA_OFF=43,s.setScreen(n(15)[screen.height]);for(l in o)"volumeUp"!==l&&"volumeDown"!==l&&(a[o[l]]=!0);s.defaultEvents={load:function(t){s.data.time.load=t.timeStamp,s.events[t.type]&&s.emit(t.type,t),r.pages.forEach(function(e){e.events[t.type]&&e.emit(t.type,t)}),s.data.time.done=+new Date,s.events.done&&s.emit("done",t)},unload:function(t){s.events[t.type]&&s.emit(t.type,t),r.pages.forEach(function(e){e.events[t.type]&&e.emit(t.type,t)})},error:function(t){},keydown:function(t){var e,n=r.current;0!==t.keyCode&&(t.code=t.keyCode,t.shiftKey&&(t.code+=1e3),t.altKey&&(t.code+=2e3),e=n.activeComponent,e&&e!==n&&(e.events[t.type]&&e.emit(t.type,t),!t.stop&&e.propagate&&e.parent&&e.parent.events[t.type]&&e.parent.emit(t.type,t)),t.stop||(n.events[t.type]&&n.emit(t.type,t),t.stop||s.events[t.type]&&s.emit(t.type,t)),s.data.host&&a[t.code]&&t.preventDefault())},keypress:function(t){var e=r.current;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t)},click:function(t){},contextmenu:function(t){t.preventDefault()},mousewheel:function(t){var e=r.current;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t),t.stop||e.events[t.type]&&e.emit(t.type,t)}};for(l in s.defaultEvents)window.addEventListener(l,s.defaultEvents[l]);window.stbEvent={},window.stbEvent.onEvent=function(t,e){if(s.events.media){if(e)try{e=JSON.parse(e)}catch(n){}s.emit("media",{code:parseInt(t,10),info:e})}},window.stbEvent.onBroadcastMessage=function(t,e,n){s.events.message&&s.emit("message",{broadcast:!0,windowId:t,message:e,data:n})},window.stbEvent.onMessage=function(t,e,n){s.events.message&&s.emit("message",{broadcast:!1,windowId:t,message:e,data:n})},window.stbEvent.onMount=function(t){s.events["device:mount"]&&s.emit("device:mount",{state:t})},window.stbEvent.onMediaAvailable=function(){s.events["media:available"]&&s.emit("media:available")},window.stbEvent.onNetworkStateChange=function(t){s.events["internet:state"]&&s.emit("internet:state",{state:t})},window.stbEvent.onWebBrowserProgress=function(t){s.events["browser:progress"]&&s.emit("browser:progress",{progress:t})},window.stbEvent.onWindowActivated=function(){s.events["window:focus"]&&s.emit("window:focus")},window.gSTB&&gSTB.SetNativeStringMode&&gSTB.SetNativeStringMode(!0),t.exports=s},function(t,e,n){"use strict";t.exports={back:8,"delete":46,channelPrev:1009,channelNext:9,ok:13,exit:27,up:38,down:40,left:37,right:39,pageUp:33,pageDown:34,end:35,home:36,volumeUp:107,volumeDown:109,f1:112,f2:113,f3:114,f4:115,refresh:116,frame:117,phone:119,set:120,tv:121,menu:122,web:123,mic:2032,rewind:2066,forward:2070,app:2076,usbMounted:2080,usbUnmounted:2081,playPause:2082,stop:2083,power:2085,record:2087,info:2089,mute:2192,clock:2032,audio:2071,keyboard:2076}},function(t,e,n){"use strict";var s=n(13);t.exports=function(){var t=s(location.search.substring(1));return t.referrer?decodeURIComponent(t.referrer):document.referrer?location.href.split("#")[0]===document.referrer?!1:document.referrer:!1}},function(t,e,n){"use strict";function s(t){t=t||{},this.active=!1,this.activeComponent=null,t.className="page "+(t.className||""),l.call(this,t),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var l=n(10);s.prototype=Object.create(l.prototype),s.prototype.constructor=s,t.exports=s},function(t,e,n){"use strict";var s="pageInit",l=n(7),i=new l({$node:document.getElementById(s)});t.exports=i},function(t,e,n){"use strict";function s(){if(p.layers.context=document.getElementById("game").getContext("2d"),p.layers.context&&p.layers.context.drawImage){document.getElementById("game").width=p.size[h].scr.w,document.getElementById("game").height=p.size[h].scr.h,document.getElementById("cursorBox").style.width=p.size[h].scr.w+"px",document.getElementById("cursorBox").style.height=p.size[h].scr.h+"px",window.moveTo(0,0),gSTB.EnableServiceButton(!0),p.balls=[];for(var t=0;t<p.cells.y;t++){p.balls[t]=[];for(var e=0;e<p.cells.x;e++)p.balls[t][e]=null}v.generateNextBalls(),v.showBall(),v.item()}}function l(t){return Math.floor(Math.random()*(parseInt(t,10)+1))}var i="pageMain",r=n(7),o=new r({$node:document.getElementById(i)}),a=n(4),c=n(5),h=a.data.metrics.height,u="./img/"+h,d=n(3).keysBlock,p=(n(6),n(3).gs);o.addListener("load",s);var v={sizeScr:"",ball:null,bgImg_1:"",bgImg_2:"",stopAddBalls:!1,isEndGame:!1,item:function(){document.getElementById("cursor").style.marginLeft=p.position.current.x*p.size[h].cll.w+"px",document.getElementById("cursor").style.marginTop=p.position.current.y*p.size[h].cll.h+"px"},createBall:function(t,e,n){var s=new Image,i=t?t:p.colors[l(p.colors.length-1)],r=this;s.src=u+"/"+i+".png",s.addEventListener("load",function(){var s=r.findeFreePlace(),l=t&&-1!=e?e:s[0],o=t&&-1!=n?n:s[1];if(0==s)return void v.showfinish();var a=this;p.balls[o][l]={x:l,y:o,color:i,scale:.1,img:a,siObj:null,_f:function(t,e){this.scale<1?(this.scale+=.2,p.layers.context.globalCompositeOperation="source-over",p.layers.context.drawImage(this.img,t*p.size[h].cll.w+p.size[h].cll.w/2-p.size[h].cll.w*p.balls[e][t].scale/2,e*p.size[h].cll.h+p.size[h].cll.h/2-p.size[h].cll.h*p.balls[e][t].scale/2,p.size[h].cll.w*this.scale,p.size[h].cll.h*this.scale)):(clearInterval(this.siObj),this.siObj=null)}},p.balls[o][l].scale=.4,p.layers.context.drawImage(this,l*p.size[h].cll.w+p.size[h].cll.w/2-p.size[h].cll.w*p.balls[o][l].scale/2,o*p.size[h].cll.h+p.size[h].cll.h/2-p.size[h].cll.h*p.balls[o][l].scale/2,p.size[h].cll.w*p.balls[o][l].scale,p.size[h].cll.h*p.balls[o][l].scale),p.balls[o][l].siObj=setInterval(function(){p.balls[o][l]._f(l,o)},25)},!1)},showfinish:function(){d=!0,p.account<50?document.getElementById("errorFinish").style.display="block":document.getElementById("errorFinish2").style.display="block"},showBall:function(){if(0==this.isEndGame){for(var t=0;t<p.nextBalls.length;t++)this.createBall(p.nextBalls[t],-1,-1);for(var e=0,t=0;t<p.balls.length;t++)for(var n=0;n<p.balls[t].length;n++)null!=p.balls[t][n]&&e++;if(e+3>=p.balls.length*p.balls[0].length)return void this.showfinish();this.generateNextBalls();var s=this;setTimeout(function(){s.checkLines(!1)},250)}else this.stopAddBalls=!1},jumpBallTimer:null,jumpBallScale:.6,jumpBallScaleD:.1,jumpBall:function(t){var e=this;9==t&&(this.jumpBallTimer=setInterval(function(){e.jumpBallStartJumping()},60))},jumpBallStartJumping:function(){this.jumpBallScale>=.75&&(this.jumpBallScaleD=-.05),this.jumpBallScale<=.55&&(this.jumpBallScaleD=.05),this.jumpBallScale+=this.jumpBallScaleD,p.layers.context.clearRect(p.move.start.x*p.size[h].cll.w,p.move.start.y*p.size[h].cll.h,p.size[h].cll.w,p.size[h].cll.h),p.layers.context.drawImage(p.balls[p.move.start.y][p.move.start.x].img,p.move.start.x*p.size[h].cll.w,p.move.start.y*p.size[h].cll.h+p.size[h].cll.h/3-p.size[h].cll.h*this.jumpBallScale/2,p.size[h].cll.w,p.size[h].cll.h)},findeFreePlace:function(){try{var t=l(p.cells.x-1),e=l(p.cells.y-1);return null!=p.balls[e][t]?this.findeFreePlace():[t,e]}catch(n){return this.isEndGame=!0,this.showfinish(),!1}},jumpBallStop:function(){clearInterval(this.jumpBallTimer),p.move.selected=!1},ballMoveStart:function(){if(null!=p.balls[p.position.current.y][p.position.current.x]){p.move.readyToCheck=!1,p.move.selected=!0,p.move.start.x=p.position.current.x,p.move.start.y=p.position.current.y;var t=this;this.jumpBallTimer=setInterval(function(){t.jumpBallStartJumping()},60)}},PressOK:function(){1==p.move.selected?p.move.start.x==p.position.current.x&&p.move.start.y==p.position.current.y?(v.jumpBallStop(),p.move.start.x=-1,p.move.start.y=-1):(null!=p.balls[p.position.current.y][p.position.current.x]&&(v.jumpBallStop(),p.move.readyToCheck=!1,p.move.selected=!0,p.move.start.x=p.position.current.x,p.move.start.y=p.position.current.y,this.ballMoveStart()),p.move.finish.x=p.position.current.x,p.move.finish.y=p.position.current.y,this.checkWay()):-1==p.move.start.x&&-1==p.move.start.y&&null!=p.balls[p.position.current.y][p.position.current.x]&&(p.move.readyToCheck=!1,p.move.selected=!0,p.move.start.x=p.position.current.x,p.move.start.y=p.position.current.y,this.ballMoveStart())},arr:[],checkWay:function(){if(null==p.balls[p.move.finish.y][p.move.finish.x]){this.currentNum=0,this.arr=[];for(var t=0;t<p.cells.y;t++){this.arr[t]=[];for(var e=0;e<p.cells.x;e++)null!=p.balls[t][e]?this.arr[t][e]="#":this.arr[t][e]="_"}this.arr[p.move.start.y][p.move.start.x]="S",this.arr[p.move.finish.y][p.move.finish.x]="F";var n=this.findPath(p.move.start.x,p.move.start.y);0!=n?this.drawWay(n):(document.getElementById("errorBadPath").style.display="block",setTimeout(function(){document.getElementById("errorBadPath").style.display="none"},1500))}},showArr:function(){for(var t="\n",e=0;e<p.cells.x;e++){for(var n="",s=0;s<p.cells.x;s++)n+=this.arr[e][s]+" ";t+=n+"\n"}return t},currentNum:0,findPath:function(t,e){if(0>t||t>this.arr.length-1||0>e||e>this.arr[0].length-1)return!1;if("F"==this.arr[e][t])return!0;if("_"!=this.arr[e][t]&&"S"!=this.arr[e][t])return!1;this.arr[e][t]=this.currentNum++;for(var n=0;n<this.arr.length*this.arr[0].length;n++)for(var s=0;s<this.arr.length;s++)for(var l=0;l<this.arr[s].length;l++)this.arr[s][l]==n&&this.setNums(l,s,n+1);return this.getWay()},setNums:function(t,e,n){0>t||t>this.arr.length-1||0>e-1||e-1>this.arr[0].length-1||"_"!=this.arr[e-1][t]||(this.arr[e-1][t]=n),0>t||t>this.arr.length-1||0>e+1||e+1>this.arr[0].length-1||"_"!=this.arr[e+1][t]||(this.arr[e+1][t]=n),0>t-1||t-1>this.arr.length-1||0>e||e>this.arr[0].length-1||"_"!=this.arr[e][t-1]||(this.arr[e][t-1]=n),0>t+1||t+1>this.arr.length-1||0>e||e>this.arr[0].length-1||"_"!=this.arr[e][t+1]||(this.arr[e][t+1]=n)},getMinFrom:function(t,e){var n=[],s=[];0>t||t>this.arr.length-1||0>e-1||e-1>this.arr[0].length-1||"_"==this.arr[e-1][t]||"#"==this.arr[e-1][t]||(n[n.length]=this.arr[e-1][t],s[s.length]={x:t,y:e-1}),0>t||t>this.arr.length-1||0>e+1||e+1>this.arr[0].length-1||"_"==this.arr[e+1][t]||"#"==this.arr[e+1][t]||(n[n.length]=this.arr[e+1][t],s[s.length]={x:t,y:e+1}),0>t-1||t-1>this.arr.length-1||0>e||e>this.arr[0].length-1||"_"==this.arr[e][t-1]||"#"==this.arr[e][t-1]||(n[n.length]=this.arr[e][t-1],s[s.length]={x:t-1,y:e}),0>t+1||t+1>this.arr.length-1||0>e||e>this.arr[0].length-1||"_"==this.arr[e][t+1]||"#"==this.arr[e][t+1]||(n[n.length]=this.arr[e][t+1],s[s.length]={x:t+1,y:e});for(var l=999,i=0,r=0;r<n.length;r++)l>n[r]&&(l=n[r],i=r);return s?{obj:s[i],num:n[i]}:!1},getMinAtThe:function(t,e,n){var s=[],l=[];return 0>t||t>this.arr.length-1||0>e-1||e-1>this.arr[0].length-1||this.arr[e-1][t]!=n||(l[l.length]={x:t,y:e-1}),0>t||t>this.arr.length-1||0>e+1||e+1>this.arr[0].length-1||this.arr[e+1][t]!=n||(s[s.length]=this.arr[e+1][t],l[l.length]={x:t,y:e+1}),0>t-1||t-1>this.arr.length-1||0>e||e>this.arr[0].length-1||this.arr[e][t-1]!=n||(s[s.length]=this.arr[e][t-1],l[l.length]={x:t-1,y:e}),0>t+1||t+1>this.arr.length-1||0>e||e>this.arr[0].length-1||this.arr[e][t+1]!=n||(s[s.length]=this.arr[e][t+1],l[l.length]={x:t+1,y:e}),l[0]},getWay:function(){var t=this.getMinFrom(p.move.finish.x,p.move.finish.y);if(0==t)return!1;for(var e=t.num,n=[t.obj],s=0;s<this.arr.length*this.arr[0].length;s++){try{n.unshift(this.getMinAtThe(n[0].x,n[0].y,--e))}catch(l){}try{if(n[0].x==p.move.start.x&&n[0].y==p.move.start.y)break}catch(l){}}return n.shift(),n},drawWay:function(t){1==t.length&&p.move.start.x==t[0].x&&p.move.start.y==t[0].y&&(t=[]);for(var e=0;e<t.length;e++)p.layers.context.drawImage(p.balls[p.move.start.y][p.move.start.x].img,t[e].x*p.size[h].cll.w+p.size[h].cll.w/2-.4*p.size[h].cll.w/2,t[e].y*p.size[h].cll.h+p.size[h].cll.h/2-.4*p.size[h].cll.h/2,.4*p.size[h].cll.w,.4*p.size[h].cll.h);this.createBall(p.balls[p.move.start.y][p.move.start.x].color,p.move.finish.x,p.move.finish.y);var n=this;setTimeout(function(){p.layers.context.clearRect(p.move.start.x*p.size[h].cll.w,p.move.start.y*p.size[h].cll.h,p.size[h].cll.w,p.size[h].cll.h),p.balls[p.move.start.y][p.move.start.x]=null;for(var e=0;e<t.length;e++)p.layers.context.clearRect(t[e].x*p.size[h].cll.w,t[e].y*p.size[h].cll.h,p.size[h].cll.w,p.size[h].cll.h);p.move.start.x=-1,p.move.start.y=-1,p.move.finish.x=-1,p.move.finish.y=-1,n.checkLines(!0),n.jumpBallStop()},500)},checkLines:function(t){for(var e=!1,n=[],s=0;s<p.balls.length;s++){n[s]=[];for(var l=0;l<p.balls[0].length;l++)0==n[s].length&&null!=p.balls[s][l]?n[s][n[s].length]={color:p.balls[s][l].color,x:p.balls[s][l].x,y:p.balls[s][l].y,del:!1}:null!=p.balls[s][l]&&n[s][n[s].length-1].color==p.balls[s][l].color?n[s][n[s].length]={color:p.balls[s][l].color,x:p.balls[s][l].x,y:p.balls[s][l].y}:n[s].length<5&&(n[s]=null!=p.balls[s][l]?new Array({color:p.balls[s][l].color,x:p.balls[s][l].x,y:p.balls[s][l].y}):[]);if(n[s].length>=5){for(var i=[],r=n[s][0].x,o=0;o<n[s].length;o++){if(n[s][o].x==r||n[s][o].x-1==r)i.push(n[s][o]);else{if(!(i.length<5))break;i=[]}r=n[s][o].x}n[s]=i}}for(var a=0;a<n.length;a++)if(n[a].length<5)n[a]=[];else{for(var c=0;c<n[a].length;c++)null==p.balls[n[a][c].y][n[a][c].x]&&(n[a]=[]);if(n[a].length<5)break;for(var c=0;c<n[a].length;c++)p.balls[n[a][c].y][n[a][c].x]=null,p.layers.context.clearRect(n[a][c].x*p.size[h].cll.w,n[a][c].y*p.size[h].cll.h,p.size[h].cll.w,p.size[h].cll.h);p.account+=n[a].length*p.coeff,e=!0}n=[];for(var l=0;l<p.balls[0].length;l++){n[l]=[];for(var s=0;s<p.balls.length;s++)0==n[l].length&&null!=p.balls[s][l]?n[l][n[l].length]={color:p.balls[s][l].color,x:p.balls[s][l].x,y:p.balls[s][l].y}:null!=p.balls[s][l]&&n[l][n[l].length-1].color==p.balls[s][l].color?n[l][n[l].length]={color:p.balls[s][l].color,x:p.balls[s][l].x,y:p.balls[s][l].y}:n[l].length<5&&(n[l]=null!=p.balls[s][l]?new Array({color:p.balls[s][l].color,x:p.balls[s][l].x,y:p.balls[s][l].y}):[]);if(n[l].length>=5){for(var i=[],u=0|n[l][0].y,o=0;o<n[l].length;o++){if(n[l][o].y==u||n[l][o].y-1==u)i.push(n[l][o]);else{if(!(i.length<5))break;i=[]}u=n[l][o].y}n[l]=i}}for(var a=0;a<n.length;a++)if(n[a].length<5)n[a]=[];else{for(var c=0;c<n[a].length;c++)null==p.balls[n[a][c].y][n[a][c].x]&&(n[a]=[]);if(n[a].length<5)break;for(var c=0;c<n[a].length;c++)p.balls[n[a][c].y][n[a][c].x]=null,p.layers.context.clearRect(n[a][c].x*p.size[h].cll.w,n[a][c].y*p.size[h].cll.h,p.size[h].cll.w,p.size[h].cll.h);p.account+=n[a].length*p.coeff,e=!0}var d=0;n=[];for(var l=0;l<p.balls[0].length;l++){var s=0;n[d]=[];for(var v=0;v<p.balls.length;v++)if(l+v<p.balls[0].length&&s+v<p.balls.length)if(0==n[d].length&&null!=p.balls[s+v][l+v])n[d][n[d].length]={color:p.balls[s+v][l+v].color,x:p.balls[s+v][l+v].x,y:p.balls[s+v][l+v].y};else if(null!=p.balls[s+v][l+v]&&n[d][n[d].length-1].color==p.balls[s+v][l+v].color)n[d][n[d].length]={color:p.balls[s+v][l+v].color,x:p.balls[s+v][l+v].x,y:p.balls[s+v][l+v].y};else{if(!(n[d].length<5))continue;null==p.balls[s+v][l+v]?n[d]=[]:n[d]=new Array({color:p.balls[s+v][l+v].color,x:p.balls[s+v][l+v].x,y:p.balls[s+v][l+v].y})}d++}for(var s=1;s<p.balls.length;s++){var l=0;n[d]=[];for(var v=0;v<p.balls.length;v++)if(l+v<p.balls[0].length&&s+v<p.balls.length)if(0==n[d].length&&null!=p.balls[s+v][l+v])n[d][n[d].length]={color:p.balls[s+v][l+v].color,x:p.balls[s+v][l+v].x,y:p.balls[s+v][l+v].y};else if(null!=p.balls[s+v][l+v]&&n[d][n[d].length-1].color==p.balls[s+v][l+v].color)n[d][n[d].length]={color:p.balls[s+v][l+v].color,x:p.balls[s+v][l+v].x,y:p.balls[s+v][l+v].y};else{if(!(n[d].length<5))continue;null==p.balls[s+v][l+v]?n[d]=[]:n[d]=new Array({color:p.balls[s+v][l+v].color,x:p.balls[s+v][l+v].x,y:p.balls[s+v][l+v].y})}n[d].length<5&&(n[d]=[]),d++}for(var a=0;a<n.length;a++)if(!(n[a].length<5)){for(var c=0;c<n[a].length;c++)p.balls[n[a][c].y][n[a][c].x]=null,p.layers.context.clearRect(n[a][c].x*p.size[h].cll.w,n[a][c].y*p.size[h].cll.h,p.size[h].cll.w,p.size[h].cll.h);p.account+=n[a].length*p.coeff,e=!0}var d=0;n=[];for(var l=p.balls[0].length-1;l>=0;l--){var s=0;n[d]=[];for(var v=0;v<p.balls.length;v++)if(l-v>=0&&s+v<p.balls.length)if(0==n[d].length&&null!=p.balls[s+v][l-v])n[d][n[d].length]={color:p.balls[s+v][l-v].color,x:p.balls[s+v][l-v].x,y:p.balls[s+v][l-v].y};else if(null!=p.balls[s+v][l-v]&&n[d][n[d].length-1].color==p.balls[s+v][l-v].color)n[d][n[d].length]={color:p.balls[s+v][l-v].color,x:p.balls[s+v][l-v].x,y:p.balls[s+v][l-v].y};else{if(!(n[d].length<5))continue;null==p.balls[s+v][l-v]?n[d]=[]:n[d]=new Array({color:p.balls[s+v][l-v].color,x:p.balls[s+v][l-v].x,y:p.balls[s+v][l-v].y})}n[d].length<5&&(n[d]=[]),d++}for(var s=1;s<p.balls.length;s++){var l=p.balls[0].length-1;n[d]=[];for(var v=0;v<p.balls.length;v++)if(l-v<p.balls[0].length&&s+v<p.balls.length)if(0==n[d].length&&null!=p.balls[s+v][l-v])n[d][n[d].length]={color:p.balls[s+v][l-v].color,x:p.balls[s+v][l-v].x,y:p.balls[s+v][l-v].y};else if(null!=p.balls[s+v][l-v]&&n[d][n[d].length-1].color==p.balls[s+v][l-v].color)n[d][n[d].length]={color:p.balls[s+v][l-v].color,x:p.balls[s+v][l-v].x,y:p.balls[s+v][l-v].y};else{if(!(n[d].length<5))continue;null==p.balls[s+v][l-v]?n[d]=[]:n[d]=new Array({color:p.balls[s+v][l-v].color,x:p.balls[s+v][l-v].x,y:p.balls[s+v][l-v].y})}n[d].length<5&&(n[d]=[]),d++}for(var a=0;a<n.length;a++)if(!(n[a].length<5)){for(var c=0;c<n[a].length;c++)p.balls[n[a][c].y][n[a][c].x]=null,p.layers.context.clearRect(n[a][c].x*p.size[h].cll.w,n[a][c].y*p.size[h].cll.h,p.size[h].cll.w,p.size[h].cll.h);p.account+=n[a].length*p.coeff,e=!0}var f=document.getElementById("account").getElementsByTagName("li");switch(f[0].innerHTML="0",f[1].innerHTML="0",f[2].innerHTML="0",f[3].innerHTML="0",p.account.toString().length){case 4:f[0].innerHTML=p.account.toString().substr(0,1),f[1].innerHTML=p.account.toString().substr(1,1),f[2].innerHTML=p.account.toString().substr(2,1),f[3].innerHTML=p.account.toString().substr(3,1);break;case 3:f[1].innerHTML=p.account.toString().substr(0,1),f[2].innerHTML=p.account.toString().substr(1,1),f[3].innerHTML=p.account.toString().substr(2,1);break;case 2:f[2].innerHTML=p.account.toString().substr(0,1),f[3].innerHTML=p.account.toString().substr(1,1);break;case 1:f[3].innerHTML=p.account.toString().substr(0,1)}1==e?this.stopAddBalls=!0:1==t&&this.showBall()},generateNextBalls:function(){p.nextBalls=new Array(p.colors[l(p.colors.length-1)],p.colors[l(p.colors.length-1)],p.colors[l(p.colors.length-1)]);for(var t=document.getElementById("nextBalls").getElementsByTagName("li"),e=0;e<p.nextBalls.length;e++)t[e].style.backgroundImage="url("+u+"/"+p.nextBalls[e]+".png)"}};o.addListener("keydown",function(t){switch(t.code){case c.right:p.position.old.y=p.position.current.y,p.position.old.x=p.position.current.x,p.position.current.x+1<=p.cells.x-1?p.position.current.x++:p.position.current.x=p.cells.x-1,v.item();break;case c.left:p.position.old.y=p.position.current.y,p.position.old.x=p.position.current.x,p.position.current.x-1>=0?p.position.current.x--:p.position.current.x=0,v.item();break;case c.down:p.position.old.y=p.position.current.y,p.position.old.x=p.position.current.x,p.position.current.y+1<=p.cells.y-1?p.position.current.y++:p.position.current.y=p.cells.y-1,v.item();break;case c.up:p.position.old.y=p.position.current.y,p.position.old.x=p.position.current.x,p.position.current.y-1>=0?p.position.current.y--:p.position.current.y=0,v.item();break;case c.ok:if(1==d)return void(window.location=window.location.href.substr(0,window.location.href.indexOf("?"))+"?referrer="+base64Encode(pages.referrer));v.PressOK();break;case c.f2:v.jumpBallStop();break;case c.f1:break;case c.record:v.showBall();break;case c.refresh:window.location=window.location.href.substr(0,window.location.href.indexOf("?"))+"?referrer="+base64Encode(pages.referrer);break;case c.exit:a.data.frame?window.parent.postMessage("hide","*"):(a.params.referrer=a.params.referrer||n(6)(),window.location.href=a.params.referrer||"file:///home/web/services.html")}}),t.exports=o},function(t,e,n){"use strict";function s(t){var e,n=this;if(t=t||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!t.propagate,l.call(this,t.data),this.$node=t.$node||document.createElement("div"),this.$body=t.$body||this.$node,this.$node.className+=" component "+(t.className||""),this.id=t.id||this.$node.id||"cid"+r++,t.parent&&t.parent.add(this),t.visible===!1&&this.hide(),t.focusable===!1&&(this.focusable=!1),this.defaultEvents){t.events=t.events||{};for(e in this.defaultEvents)t.events[e]=t.events[e]||this.defaultEvents[e]}t.events&&this.addListeners(t.events),t.children&&this.add.apply(this,t.children),this.$node.addEventListener("click",function(t){0===t.button&&(n.focus(),n.events.click&&n.emit("click",{event:t})),t.stopPropagation()})}var l=n(1),i=n(2),r=0;s.prototype=Object.create(l.prototype),s.prototype.constructor=s,s.prototype.defaultEvents=null,s.prototype.add=function(t){var e;for(e=0;e<arguments.length;e++)t=arguments[e],this.children.push(t),t.parent=this,t.$node&&null===t.$node.parentNode&&this.$body.appendChild(t.$node),this.events.add&&this.emit("add",{item:t})},s.prototype.remove=function(){this.parent&&(i.current.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(t){t.remove()}),this.removeAllListeners(),this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},s.prototype.focus=function(t){var e=i.current,n=e.activeComponent;return this.focusable&&this!==n?(n&&n.blur(),e.activeComponent=n=this,n.$node.classList.add("focus"),n.events.focus&&n.emit("focus",t),!0):!1},s.prototype.blur=function(){var t=i.current,e=t.activeComponent;return this.$node.classList.remove("focus"),this===e?(t.activeComponent=null,this.events.blur&&this.emit("blur"),!0):!1},s.prototype.show=function(t){return this.visible?!0:(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",t),!0)},s.prototype.hide=function(){return this.visible?(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0):!0},t.exports=s},function(t,e,n){"use strict";function s(t){l.call(this),this.data=t||{}}var l=n(1);s.prototype=Object.create(l.prototype),s.prototype.constructor=s,s.prototype.idName="id",s.prototype.clear=function(){var t=this.data;return Object.keys(t).length>0?(this.data={},this.events.clear&&this.emit("clear",{data:t}),!0):!1},s.prototype.init=function(t){return t?(this.clear(),this.data=t,this.events.init&&this.emit("init",{data:t}),!0):!1},s.prototype.has=function(t){return this.data.hasOwnProperty(t)},s.prototype.get=function(t){return this.data[t]},s.prototype.set=function(t,e){var n=t in this.data,s={name:t,curr:e};return n?(s.prev=this.data[t],e!==s.prev?(this.data[t]=e,this.events.change&&this.emit("change",s),!0):!1):(this.data[t]=e,this.events.change&&this.emit("change",s),!0)},s.prototype.unset=function(t){var e,n=t in this.data;return n?(e={name:t,prev:this.data[t]},delete this.data[t],this.events.change&&this.emit("change",e),!0):!1},t.exports=s},function(t,e){"use strict";if(!("classList"in document.documentElement)){var n=Array.prototype,s=n.indexOf,l=n.slice,i=n.push,r=n.splice,o=n.join;window.DOMTokenList=function(t){if(this._element=t,t.className!==this._classCache){if(this._classCache=t.className,!this._classCache)return;var e,n=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(e=0;e<n.length;e++)i.call(this,n[e])}},window.DOMTokenList.prototype={add:function(t){this.contains(t)||(i.call(this,t),this._element.className=l.call(this,0).join(" "))},contains:function(t){return-1!==s.call(this,t)},item:function(t){return this[t]||null},remove:function(t){var e=s.call(this,t);-1!==e&&(r.call(this,e,1),this._element.className=l.call(this,0).join(" "))},toString:function(){return o.call(this," ")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(t,e){"use strict";t.exports=function(t){var e={};return t.split("&").forEach(function(t){t=t.split("="),2===t.length&&(e[t[0]]=decodeURIComponent(t[1]))}),e}},function(t,e){"use strict";function n(t){for(var e=n.options,s=e.parser[e.strictMode?"strict":"loose"].exec(t),l={},i=14;i--;)l[e.key[i]]=s[i]||"";return l[e.q.name]={},l[e.key[12]].replace(e.q.parser,function(t,n,s){n&&(l[e.q.name][n]=s)}),l}n.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.exports=n},function(t,e){"use strict";t.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}}]);