"use strict";function VList(parent){switch(this.activeItem=null,this.indexView=null,this.data=[],this.scrollBar=null,this.size=7,this.states={},screen.height){case 480:this.size=5;break;case 576:this.size=5;break;case 720:this.size=7;break;case 1080:this.size=7}CBase.call(this,parent)}VList.prototype=Object.create(CBase.prototype),VList.prototype.constructor=VList,VList.prototype.Length=function(){return this.data.length},VList.prototype.renderItem=function($item,attrs){$item.innerText=attrs.name},VList.prototype.focus=function(){this.$body.focus()},VList.prototype.EventHandler=function(event){switch(event.code){case KEYS.UP:case KEYS.DOWN:case KEYS.RIGHT:case KEYS.LEFT:case KEYS.PAGE_UP:case KEYS.PAGE_DOWN:case KEYS.HOME:case KEYS.END:this.move(event.code);break;case KEYS.OK:this.activeItem.onclick()}event.preventDefault()},VList.prototype.Init=function(config){var item,i,self=this,onClick=!1;for(this.handleInner=this.$body=this.$node=void 0===config.handle?document.createElement("div"):config.handle,this.size>0&&(this.$body.innerText=null),void 0!==config.onClick&&(onClick=config.onClick),this.$node.classList.add("vlist-main"),i=0;i<this.size;i++)item=document.createElement("a"),item.index=i,onClick&&(item.onclick=onClick),this.$body.appendChild(item);this.$body.addEventListener("mousewheel",function(event){event.wheelDeltaY&&self.move(event.wheelDeltaY>0?KEYS.UP:KEYS.DOWN)}),config.scrollBar&&null===this.scrollBar&&(this.scrollBar=config.scrollBar,this.scrollBar.init({viewSize:self.size,realSize:self.data.length}))},VList.prototype.renderView=function(index){var $item,i,itemData,currIndex;if(this.indexView!==index){for(this.indexView=currIndex=index,i=0;i<this.size;i++)$item=this.$body.children[i],itemData=this.data[index],void 0!==itemData?($item.data=itemData,$item.index=index,this.renderItem($item,itemData),itemData.markable?$item.classList.add("mark"):$item.classList.remove("mark")):($item.data=$item.index=void 0,$item.ready&&($item.$body.innerText="",$item.$body.style.background="")),index++;return null!==this.scrollBar&&this.scrollBar.scrollTo(this.indexView),!0}return!1},VList.prototype.move=function(direction){direction===KEYS.UP&&(this.activeItem&&this.activeItem.index>0?this.activeItem===this.$body.firstChild?this.renderView(this.indexView-1):this.focusItem(this.activeItem.previousSibling):this.onOverflow&&this.onOverflow({direction:direction})),direction===KEYS.DOWN&&(this.activeItem&&this.activeItem.index<this.data.length-1?this.activeItem===this.$body.lastChild?this.renderView(this.indexView+1):this.focusItem(this.activeItem.nextSibling):this.onOverflow&&this.onOverflow({direction:direction})),direction===KEYS.PAGE_UP&&(this.renderView(this.indexView<this.size?0:this.indexView-this.size+1),this.focusItem(this.$body.firstChild)),direction===KEYS.PAGE_DOWN&&(this.data.length>this.size?(this.renderView(this.indexView>this.data.length-2*this.size?this.data.length-this.size:this.indexView+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])),(direction===KEYS.HOME||direction===KEYS.LEFT)&&(this.renderView(0),this.focusItem(this.$body.firstChild)),(direction===KEYS.END||direction===KEYS.RIGHT)&&(this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]))},VList.prototype.focusItem=function($item){var $prev=this.activeItem;return void 0!==$item&&$prev!==$item?(null!==$prev&&$prev.classList.remove("focused"),this.activeItem=$item,this.activeItem.data=this.data[this.activeItem.index],$item.classList.add("focused"),!0):!1},VList.prototype.Add=function(name,attrs,states){var prop;if(attrs.name=name,states)for(prop in states)attrs.prop=states[prop];this.data.push(attrs)},VList.prototype.Clear=function(){this.data=[]},VList.prototype.SetState=function(item,option,state){if(state=!!state,item[option]!==state){this.states[option]||(this.states[option]=[]);var index=this.states[option].indexOf(item);return state?-1===index&&this.states[option].push(item):-1!==index&&this.states[option].splice(index,1),item[option]=state,!0}return!1},VList.prototype.Render=function(){this.indexView=-1,this.renderView(0),this.focusItem(this.$body.firstChild)},VList.prototype.Next=function(){return this.data[this.activeItem.index+1]},VList.prototype.Current=function(){return this.activeItem},VList.prototype.SetPosition=function(data,manageFocus){var i,viewIndex,index=this.data.indexOf(data);return-1===index||void 0===index?!1:(this.indexView=-1,i=data.index||0,i<this.size?viewIndex=0:i>this.data.length-this.size&&(viewIndex=this.data.length-this.size,i-=viewIndex),this.renderView(viewIndex),manageFocus&&this.focusItem(this.$body.children[i]),!0)},VList.prototype.Each=function(callback){this.data.forEach(callback)};