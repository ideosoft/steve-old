function CTreeList(parent,options){this.openedClass="opened",this.branchClass="branch",this.arrowClassName="arrow",this.placeholderClassName="placeholder",void 0!==options&&CTreeList.parameters.forEach(function(name){void 0!==options[name]&&(self[name]=options[name])}),this.tree||(this.tree=[]),CScrollList.call(this,parent),this.baseClass+=" ctreelist-main"}CTreeList.prototype=Object.create(CScrollList.prototype),CTreeList.prototype.constructor=CTreeList,CTreeList.parameters=["openedClass","folderClass","arrowClassName","placeholderClassName","contentField","titleField","data"],CTreeList.prototype.SetTree=function(tree,refresh){this.tree=tree,refresh===!0&&this.Refresh()},CTreeList.prototype.Refresh=function(){var el,i;for(this.Clear(),i=0;i<this.tree.length;i++)el=this.tree[i],el.item=this.Add({data:el,level:0}),Array.isArray(el[this.contentField])&&this.RenderLevel(el[this.contentField],el.item,1)},CTreeList.prototype.RenderLevel=function(data,parent,level){var el,i,attrs={};for(i=0;i<data.length;i++)el=data[i],el.parent=parent,(parent.hidden===!0||parent.data.opened===!1)&&(attrs.hidden=!0),el.item=this.Add({data:el,level:level,attrs:attrs}),Array.isArray(el[this.contentField])&&this.RenderLevel(el[this.contentField],el.item,level+1)},CTreeList.prototype.Add=function(options){var item,i,items=[],attrs=options.attrs||{};if(void 0!==options.level)for(i=0;i<options.level;i++)items.push(element("div",{className:this.placeholderClassName}));return attrs.data=options.data||{},attrs.data.level=options.level,items.push(options.data[this.titleField]),item=CScrollList.prototype.Add.call(this,items,attrs),Array.isArray(options.data[this.contentField])&&(item.classList.add(this.branchClass),options.data.opened===!0&&item.classList.add(this.openedClass)),item},CTreeList.prototype.OpenBranch=function(item,open,forced,subBranch){var self=this;open===!0?item.classList.add(this.openedClass):item.classList.remove(this.openedClass),Array.isArray(item.data[this.contentField])&&(item.data[this.contentField].forEach(function(element){element.item.visible!==!1&&(Array.isArray(element[self.contentField])&&(element.opened===!0&&open||!open||forced)&&self.OpenBranch(element.item,open,forced,!0),self.Hidden(element.item,!open))}),(forced||subBranch!==!0)&&(item.data.opened=open))},CTreeList.prototype.OpenAll=function(open){for(var item,i=0;i<this.tree.length,item=this.tree[i];i++)item.type===MEDIA_TYPE_HELP_FOLDER&&this.OpenBranch(item.item,open,!0)},CTreeList.prototype.Filter=function(text){var count,word,self=this,words=text.split(" "),leafs=[];this.Each(function(item){if(count=0,void 0===item.data[this.contentField]){for(var i=0;i<words.length,word=words[i];i++)-1!==item.data.sentence.toLowerCase().indexOf(word)&&count++;count===words.length&&leafs.push(item)}item.visible=!1,self.Hidden(item,!0)}),leafs.forEach(function(leaf){self.ShowLeaf(leaf,!0)}),this.Focused(this.FirstMatch(this.filterText),!0)},CTreeList.prototype.ShowAll=function(){var self=this;this.Each(function(item){self.Hidden(item,!1),item.visible=!0}),this.Focused(this.FindOne(),!0)},CTreeList.prototype.ShowLeaf=function(leaf,show){var parent=leaf,self=this;if(leaf.data.type===MEDIA_TYPE_HELP_ARTICLE)for(;parent=parent.data.parent;)self.Hidden(parent,show!==!0),parent.visible=show;leaf.visible=show,self.Hidden(leaf,show!==!0)};