"use strict";function reloadStyles(){var time=+new Date;Array.prototype.slice.call(document.head.getElementsByTagName("link")).forEach(function(tag){tag.href=tag.href.split("?_")[0]+"?_="+time})}function reloadAllScripts(filter){for(var scripts=document.head.getElementsByTagName("script"),filtered=!1,script=null,src="",i=0;i<scripts.length;i++)script=scripts[i],filtered=!1,src=void 0,"text/javascript"===script.type&&void 0!==script.attributes.src&&(filtered||(src=script.src,script.parentNode.removeChild(script),-1!==src.indexOf("?_")&&(src=src.substr(0,src.indexOf("?_"))),loadScript(src)))}function reloadScripts(src){for(var scripts=document.head.getElementsByTagName("script"),curr_time=(new Date).getTime(),i=0,script=null,src="";i<scripts.length;i++)script=scripts[i],"text/javascript"===script.type&&-1!==script.src.indexOf(src)&&(src=script.src+curr_time,script.parentNode.removeChild(script),loadScript(src))}function reloadPage(){gSTB.Stop(),window.location.reload(!0)}function imposeImageToScreen(image,opacity){imposeImageToScreen.image=element("div"),imposeImageToScreen.image.style.width=WINDOW_WIDTH+"px",imposeImageToScreen.image.style.height=WINDOW_HEIGHT+"px",imposeImageToScreen.image.style.position="absolute",imposeImageToScreen.image.style.background='url("'+image+'") no-repeat',imposeImageToScreen.image.style.opacity=opacity||1,imposeImageToScreen.image.style.zIndex=1e3,document.body.appendChild(imposeImageToScreen.image)}function focusTracker(){focusTracker.state=!focusTracker.state,focusTracker.state?(console.log("focus tracking: started"),focusTracker.focus=Element.prototype.focus,focusTracker.blur=Element.prototype.blur,focusTracker.select=HTMLInputElement.prototype.select,Element.prototype.focus=function(){console.log("focus",this),focusTracker.focus.call(this)},Element.prototype.blur=function(){console.log("blur",this),focusTracker.blur.call(this)},HTMLInputElement.prototype.select=function(){console.log("select",this),focusTracker.select.call(this)}):(console.log("focus tracking: stopped"),Element.prototype.focus=focusTracker.focus,Element.prototype.blur=focusTracker.blur,HTMLInputElement.prototype.select=focusTracker.select)}var echo=function(data,title){EMULATION&&console.log(title?title:"log:",data);var red="[31m",bold="[1m",green="[32m",reset="[0m",type=Object.prototype.toString.call(data).match(/\s([a-z|A-Z]+)/)[1];return type="Error"===type?red+type+reset:green+type+reset,(data instanceof Object||Array.isArray(data))&&(data=data.nodeName?data.outerHTML:JSON.stringify(data,null,4)),title=title||"",gSTB.Debug("["+type+"]	"+(title?bold+title+green+":	"+reset:"")+data),data};!function(){window.addEventListener("keydown",function(event){switch(event.code){case 97:echo("reload page"),reloadPage();break;case 98:echo("reload CSS"),reloadStyles();break;case 99:reloadAllScripts(["target-script-min.js"]);break;case 100:echo("toggle grid"),imposeImageToScreen.image?(document.body.removeChild(imposeImageToScreen.image),delete imposeImageToScreen.image):imposeImageToScreen(PATH_SYSTEM+"grid."+WINDOW_HEIGHT+".png");break;case 103:"1"!==stbStorage.getItem("spyjs.active")?(stbStorage.setItem("spyjs.active",1),console.log("SpyJS: enable"),console.log("SpyJS: set proxy to "+location.hostname+":3546"),gSTB.SetWebProxy(location.hostname,3546,"","",""),location.reload()):(stbStorage.setItem("spyjs.active",0),gSTB.ResetWebProxy(),console.log("SpyJS: disable"),location.reload());break;case 104:focusTracker();break;case 220:echo("\n\n\n<html><head>\n"+document.head.innerHTML+"\n</head>\n<body>\n"+document.body.innerHTML+"\n</body>\n</html>\n")}})}();